#!/bin/bash

# Exit immediately if any command fails (non-zero exit status)
set -e

# Create brand new output directory
output_dir="/tmp/aws-examples"
if [ -d "$output_dir" ]; then
    rm -r "$output_dir"
fi
mkdir -p "$output_dir"

# Loop to create random number (from 5 to 10) of files
num_files=$((RANDOM % 6 + 5))
for ((i=1; i<=num_files; i++))
do
    # filename with leading zero (e.g., file_01.txt)
    filename=$(printf "file_%02d.txt" $i)
    
    # Generate random content (50-200 bytes) from /dev/urandom
    # head -c limits the output to a random size in the specified range
    head -c $((RANDOM % 151 + 50)) /dev/urandom > "$output_dir/$filename"
done

# Display the directory structure
tree "$output_dir"
